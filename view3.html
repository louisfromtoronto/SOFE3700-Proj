<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>Product with highest price in each category</title>
  </head>

  <body>
    <h1>Product with highest price in each category</h1>

    <div id="table"></div>
  </body>

  <script>
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        var txt = "<table>";
        myObj = JSON.parse(this.responseText);
        console.log(myObj);
        txt += "<table border='1'>";
        txt +=
          "<tr><td>Product Name</td><td>Price</td><td>Category_ID</td></tr>";
        for (x in myObj) {
          console.log(myObj[x]);
          txt +=
            "<tr><td>" +
            myObj[x].ProductName +
            "</td><td>" +
            myObj[x].Price +
            "</td><td>" +
            myObj[x].Category_ID +
            "</td></tr>";
        }
        txt += "</table>";
        document.getElementById("table").innerHTML = txt;
      }
    };

    xmlhttp.open("GET", "http://localhost:3000/view3", true);
    // xmlhttp.setRequestHeader(
    //   "Content-type",
    //   "application/x-www-form-urlencoded"
    // );
    xmlhttp.send();
  </script>
</html>
